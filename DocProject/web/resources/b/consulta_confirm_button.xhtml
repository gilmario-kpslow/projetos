<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:composite="http://java.sun.com/jsf/composite"
                xmlns:f="http://java.sun.com/jsf/core">

    <composite:interface>
        <composite:attribute name="nome_dialog" required="true" shortDescription="WigetVar ou nome do dialog que deve fechar após a ação"/>
        <composite:attribute name="componente_to_update" required="true" shortDescription="componete atualizado apos selecionar a linha"/>
        <composite:attribute name="valor" required="true" shortDescription="valor designado para um bean"/>
        <composite:attribute name="alvo"  required="true" shortDescription="propriedade a receber o novo objeto"/>
        <composite:attribute name="sub_valor" default="" required="false"/>
        <composite:attribute name="sub_alvo" default="" required="false"/>
        <composite:attribute name="sub" default="false" required="false"/>
    </composite:interface>
    <composite:implementation>
        <ui:fragment rendered="#{not cc.attrs.sub}">
            <p:commandButton oncomplete="#{cc.attrs.nome_dialog}.hide();" icon="ui-icon-check" title="Selecionar" style="width: 20px;height: 20px;" update="#{cc.attrs.componente_to_update}">
                <f:setPropertyActionListener target="#{cc.attrs.alvo}" value="#{cc.attrs.valor}"/>
            </p:commandButton>
        </ui:fragment>
        <ui:fragment rendered="#{cc.attrs.sub}">
            <p:commandButton oncomplete="#{cc.attrs.nome_dialog}.hide();" icon="ui-icon-check" title="Selecionar" style="width: 20px;height: 20px;" update="#{cc.attrs.componente_to_update}">
                <f:setPropertyActionListener target="#{cc.attrs.alvo}" value="#{cc.attrs.valor}"/>
                <f:setPropertyActionListener target="#{cc.attrs.sub_alvo}" value="#{cc.attrs.sub_valor}" rendered="#{cc.attrs.sub}"/>
            </p:commandButton>
        </ui:fragment>
    </composite:implementation>
</ui:composition>


